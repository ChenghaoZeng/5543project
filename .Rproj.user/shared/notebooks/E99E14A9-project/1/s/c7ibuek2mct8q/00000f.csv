"0","#Set up survey replicate design (household)"
"0","rep_cols <- grep(""^WHS\\d{2}$"", names(hh_merged), value = TRUE)"
"0","if(length(rep_cols) < 1) stop(""Replicate weight columns WHS01..WHS60 not found. Rename or supply replicate weights."")"
"0",""
"0","# create srvyr survey object using Fay method (rho = 0.5)"
"0","hh_svy <- hh_merged %>%"
"0","  as_survey_rep(weights = hh_weight,"
"0","                repweights = all_of(rep_cols),"
"0","                type = ""Fay"","
"0","                rho = 0.5)"
"0",""
